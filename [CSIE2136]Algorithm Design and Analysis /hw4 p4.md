這題因為是一個環切$M$刀，我們要把他退化成一個rod來做dp(之前上課的內容)，但我們不知道要斷在哪讓ring退化成rod，只知道任意切有$\frac{N}{M}$的機率會切到一個正確的位置使ring變rod，那我們就亂切ㄅ🤪

首先因為題目的要求是$N$個element切$M$刀，代表dp的時候至少會有$N\cdot M$個狀態，假設我們能找到一個$O(1)$時間的轉移式，那每次dp就是$O(NM)$時間，那做$k$次任意戳一個點為ring的斷點使其變rod然後做dp的複雜度就是$O(kNM)$，那就讓$k=\frac{10N}{M}$，這題的複雜度就只有$O(N^2)$了。我們可以驗證一下這樣做會失敗的機率有多少，此題最差就是$1000$個element只切$2$刀，代表切一次只有$1/500$的機率成功，連切$k$次都失敗的機率是${\frac{499}{500}}^{5000}=0.000044947592708$，代表即使是最差的case都幾乎不可能失敗(這邊大家參數可以再調)。

接下來是dp的部分，這裡我卡很久因為一直只想到$O(N)$轉移的方法，然後還一直以為自己dp只花$O(NM)$，有夠低能。狀態定義如下，定義random的斷點後之第一個element的index為$0$，其後接著index: $1, 2, 3,\cdots N-1$的element，$dp(i,j)$為$element[0, ..., i]$切$j$刀時的最小risk值。我們定義轉移式為：
$$
dp(i,j)=min(dp(i-1,j)+add_1, dp(i-1, j-1)+add_2, dp(i-2,j-1)+add_3)
$$
其中$add_1$是$dp(i-1,j)$的最尾段和element[i]相連之後所增加的額外risk，$add_2$是element[i]自己一段時的risk值，$add_3$是$dp(i-2,j-1)$的最尾段和element[i-1, i]相連之後額外增加的risk值。這三個都是$O(1)$可以算出來的東西，我的方法是紀錄前一個狀態的最尾段是切在哪來判定$add_1,add_3$是什麼值。此外大家可以先把element[0,...,N-1]連成一段時的總risk先算好，每次dp往前一個狀態時，只要花$O(1)$時間扣掉最末端的element所帶來的risk就好，例如dp(i,j)時，你有element[0,...,i]的總risk，你只要扣掉最末段就能得到在算dp(i-1,j)所需要的element[0,...,i-1]的總risk值。

那大概就這樣了...



